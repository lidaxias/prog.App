<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    	xmlns:vm="using:progMap.ViewModels"
        mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="500"
		Height="500" MinWidth="1100" Width="1100"
        x:Class="progMap.App.Avalonia.Views.FileFormatorWindow"
        Title="Формирование образа файла"
		WindowStartupLocation="CenterScreen">
	
	<Design.DataContext>
		<vm:FileFormatorVm/>
	</Design.DataContext>

	<DockPanel LastChildFill="True">
		<DockPanel LastChildFill="True">
			<StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="10, 5">
				<TextBlock Text="Стартовый адрес" Margin="0, 1" HorizontalAlignment="Center" VerticalAlignment="Center"/>
				<TextBox Margin="10, 1" Text="{Binding StartAddressString}" HorizontalAlignment="Center" VerticalAlignment="Center" MinHeight="30" MinWidth="110" MaxWidth="110"/>
				<TextBlock Text="Размер" Margin="10, 1" HorizontalAlignment="Center" VerticalAlignment="Center"/>
				<TextBox Margin="1" Text="{Binding SizeString}" MinHeight="30" MinWidth="110" MaxWidth="110"/>
			</StackPanel>
			<Border DockPanel.Dock="Bottom" BorderThickness="0,2,0,0" BorderBrush="Gray" Padding="0" >
				<Grid DockPanel.Dock="Bottom" HorizontalAlignment="Center">
					<Grid.ColumnDefinitions>
						<ColumnDefinition/>
						<ColumnDefinition/>
						<ColumnDefinition/>
					</Grid.ColumnDefinitions>
					<Grid.RowDefinitions>
						<RowDefinition/>
						<RowDefinition/>
					</Grid.RowDefinitions>
					<Button Grid.Row="1" Content="Сформировать файл" Background="White" BorderBrush="#775285" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" FontWeight="DemiBold" Width="200"
                    Margin="3" Padding="3" Height="25"
				    Command="{Binding GenerateFileCommand}"/>
				</Grid>
			</Border>
			<Grid DockPanel.Dock="Top" ColumnDefinitions="*, 150, 150, 2*, 70" Margin="5, 0">
				<TextBlock Grid.Column="0" Margin="5" Text="Имя области"/>
				<TextBlock Grid.Column="1" Margin="5" Text="Адрес области"/>
				<TextBlock Grid.Column="2" Margin="5" Text="Размер области"/>
				<TextBlock Grid.Column="3" Margin="5" Text="Файл"/>
			</Grid>

			<ListBox ItemsSource="{Binding IncludedFilesSectionConfigurationsVm}" AutoScrollToSelectedItem="True">
				<ListBox.Styles>
					<Style Selector="ListBoxItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
						<Setter Property="Background" Value="#7F7B65CE"/>
					</Style>
					<Style Selector="ListBoxItem:selected /template/ ContentPresenter#PART_ContentPresenter">
						<Setter Property="Background" Value="#7F7B65CE"/>
					</Style>
				</ListBox.Styles>
				<ListBox.ItemTemplate>
					<DataTemplate DataType="vm:FileSectionConfigurationVm">
						<Border BorderThickness="1" BorderBrush="Gray" Margin="0">
							<Grid ColumnDefinitions="*, 150, 150, 2*, 70">
								<TextBlock Grid.Column="0" Margin ="3"  Text="{Binding Name}" FontSize="14" VerticalAlignment="Center"/>
								<TextBlock Grid.Column="1" VerticalAlignment="Center" FontSize="14"  FontFamily="Lucida Console" Margin ="3" Text="{Binding Address, StringFormat={}0x{0:X8}}"/>
								<TextBlock Grid.Column="2" VerticalAlignment="Center" FontSize="14"  FontFamily="Lucida Console" Margin ="3" Text="{Binding Size, StringFormat={}0x{0:X8}}"/>
								<TextBox Grid.Column="3" VerticalAlignment="Center" Margin="3" Text="{Binding FileNameString}"/>
								<Button Grid.Column="4" VerticalAlignment="Center" Margin="3" Content="Обзор" Command="{Binding OpenFileCommand}"></Button>
							</Grid>
						</Border>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
		</DockPanel>
	</DockPanel>
</Window>
